
<main class="dashboard-main">
  <h1>Dashboard</h1>

<nav class="devise-dropdown">
  <button onclick="handleDropdown()" class="devise-dropbtn"></button>
  <div id="devise-myDropdown" class="devise-dropdown-content">
    <% if user_signed_in? %>
      Logged in as: <strong><%= current_user.email %></strong>
      <%= link_to "home", root_path %>
      <%= link_to 'Edit Profile', edit_user_registration_path, :class => 'nav-link'%>
      <%= link_to "Logout", destroy_user_session_path, method: :delete, :class => 'navbar-link'  %>
    <% else %>
      <%= link_to "home", root_path %>
      <%= link_to "Sign up", new_user_registration_path, :class => 'navbar-link'  %> 
      <%= link_to "Login", new_user_session_path, :class => 'navbar-link'  %>
    <% end %>  
  </div>    
</nav>
<!--
  <div>
    Would you like to finish setting up your profile?
  <%= link_to "Setup Profile", edit_user_registration_path %>
  </div>
-->
  <div class="dashboard-create">
    <%= link_to "Create Shipment", new_parcel_path %>
  </div>

  <div class="dashboard-account">
  <h2>ACCOUNT INFO</h2>
    <% if user_signed_in? %>
      <div>
        <%= label_tag("Company:") %>
        <%= content_tag(:from_company, current_user.profile&.name) %>
      </div>
      <div> 
        <%= label_tag("Phone:") %>
        <%= content_tag(:from_phone, current_user.profile&.phone) %>
      </div>
      <div> 
      <%= label_tag("Street1:") %>
        <%= content_tag(:from_street1, current_user.primary_location&.street1) %>
      </div>
      <div> 
        <%= label_tag("Street2:") %>
        <%= content_tag(:from_street2, current_user.primary_location&.street2) %>
      </div>
      <div> 
        <%= label_tag("City:") %>
        <%= content_tag(:from_city, current_user.primary_location&.city) %>
      </div>
      <div> 
        <%= label_tag("State:") %>
        <%= content_tag(:from_state, current_user.primary_location&.state) %>
      </div>
      <div> 
        <%= label_tag("Zip:") %>
        <%= content_tag(:from_zip, current_user.primary_location&.zip) %>
      </div>
      <div> 
        <%= label_tag("Country:") %>
        <%= content_tag(:from_country, current_user.primary_location&.country) %>
      </div>
    <% end %> 
  </div>
  <div>
      <h2>Address History</h2>
      <ul>
        <% @locations.each do |location| %>
        <li>
          <ul>
            <% @keys.each do |key| %>
            <% if !location[key].nil? && !location[key].strip.empty? %>
            <li><%= "#{key}: #{location[key]}" %></li>
            <% end %>
            <% end %>
          </ul>
        </li>
        <% end %>
      </ul>

  </div>

</main>
